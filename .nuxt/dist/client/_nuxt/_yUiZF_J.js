import{_ as E}from"./BQToi7vg.js";import{_ as L,r as h,u as S,P as C,c as o,a as e,b as g,w as f,Q as N,R as O,o as a,d as b,s as v,t as d,n as x,p as R,e as F}from"./CPMVF56r.js";import{_ as P,a as U}from"./CkkgRTxT.js";import{i as V,h as w,f as y,g as B,c as D,b as T}from"./o8qONBl5.js";const l=r=>(R("data-v-97cb30a9"),r=r(),F(),r),A={class:"bg-gray-200 min-h-screen p-8"},M={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$={class:"flex flex-col sm:flex-row justify-between items-center mb-4"},J=l(()=>e("h1",{class:"big-center-text lg:mb-0 lg:mr-4"},"Мої оголошення",-1)),Q={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},W={class:"aspect-w-1 aspect-h-1"},q={key:0},z=["src"],G={class:"p-4"},H={class:"text-lg font-semibold truncate mb-2"},K={class:"flex items-center"},X=l(()=>e("img",{src:P,alt:"Місто",class:"mr-2 inline-block h-4 w-4"},null,-1)),Y={class:"flex items-center"},Z=l(()=>e("img",{src:U,alt:"Категорія",class:"mr-2 inline-block h-4 w-4"},null,-1)),ee=l(()=>e("hr",{class:"my-4 border-t border-gray-300"},null,-1)),se={class:"font-bold text-xl my-4"},te={class:"mt-4"},oe=["onClick"],ae=["onClick"],ce={key:1},ne=l(()=>e("p",null,"У Вас все ще немає оголошень, додайте їх.",-1)),le=[ne],ie={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col justify-center items-center h-full"},re=l(()=>e("p",{class:"text-lg mb-4"},"Ви не ввійшли в профіль",-1)),de="https://buy-sell-api.onrender.com/api/user/image/",_e={__name:"index",setup(r){const i=h(null),_=S(),m=h({}),k=async s=>{D({id:s}),console.log(T().id),_.push("/profile/user/ads/edit")},I=async s=>{const c={id:s},n="https://buy-sell-api.onrender.com/api/user/ads/"+s;(await y(n,{method:"DELETE",body:JSON.stringify(c)})).ok&&(console.log("Успішно видалено!!!"),await w(),await p(),_.push("/profile/user/ads"))},j=async s=>{try{const c=de+s,n=await y(c);if(!n.ok)throw new Error("Failed to load image");const t=await n.blob(),u=URL.createObjectURL(t);m.value[s]=u}catch(c){console.error("Error loading image:",c)}};async function p(){const s=B();s&&(i.value=s)}return C(()=>{V()||_.push("/auth/"),w(),p();for(const s of i.value.ads)j(s.previewImageId)}),(s,c)=>{const n=E;return a(),o("div",A,[i.value?(a(),o("div",M,[e("div",$,[J,g(n,{to:"/profile/user/ads/add",class:"green-button"},{default:f(()=>[b("Додати оголошення")]),_:1})]),i.value.ads.length>0?(a(),o("div",Q,[(a(!0),o(N,null,O(i.value.ads,t=>(a(),o("div",{key:t.id,class:"bg-white rounded-lg shadow-md overflow-hidden min-w-0 min-h-0"},[e("div",W,[t.previewImageId?(a(),o("div",q,[m.value[t.previewImageId]?(a(),o("img",{key:0,class:"thumb",src:m.value[t.previewImageId],alt:"Image"},null,8,z)):v("",!0)])):v("",!0)]),e("div",G,[e("h3",H,d(t.name),1),e("div",K,[X,e("p",null,d(t.city.name),1)]),e("div",Y,[Z,e("p",null,d(t.category.name),1)]),ee,e("p",se,d(t.price)+" грн",1),e("div",te,[e("button",{onClick:x(u=>k(t.id),["prevent"]),class:"orange-button w-full mb-2"},"Редагувати",8,oe),e("button",{onClick:x(u=>I(t.id),["prevent"]),class:"red-button w-full"},"Видалити",8,ae)])])]))),128))])):(a(),o("div",ce,le))])):(a(),o("div",ie,[re,g(n,{to:"/auth/",class:"btn-admin"},{default:f(()=>[b("Ввійти")]),_:1})]))])}}},ge=L(_e,[["__scopeId","data-v-97cb30a9"]]);export{ge as default};
