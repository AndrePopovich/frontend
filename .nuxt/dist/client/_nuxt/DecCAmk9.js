import{_ as k}from"./BQToi7vg.js";import{s as S,f as T,a as V}from"./o8qONBl5.js";import{_ as I,r as u,u as B,c as d,a as s,n as N,q as f,v as _,t as m,s as x,b as j,w as E,o as p,d as q,p as C,e as L}from"./CPMVF56r.js";const h=r=>(C("data-v-17aac432"),r=r(),L(),r),P={class:"bg-gradient-to-b from-purple-900 to-purple-300 min-h-screen flex flex-col justify-center items-center px-4"},D=h(()=>s("h1",{class:"text-4xl font-bold text-white mb-8"},"Вітаємо Вас в BuySell",-1)),J={class:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md"},M={class:"flex flex-col space-y-4"},O={class:"flex flex-col"},U={key:0,class:"text-red-500 text-xs"},W={class:"flex flex-col"},F={key:0,class:"text-red-500 text-xs"},R=h(()=>s("button",{type:"submit",class:"btn bg-purple-800 text-white hover:bg-purple-900 w-full mt-4"},"Увійти",-1)),z="https://buy-sell-api.onrender.com/api/auth/authenticate",A={__name:"index",setup(r){const c=u(""),i=u(""),v=B(),o=u(""),a=u(""),w=async()=>{if(g(),b())try{const e={email:c.value,password:i.value},n=await fetch(z,{credentials:"include",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(n.ok){const{token:l}=await n.json();S(l),console.log("Успішно отримано та збережено JWT токен:",l),y(),v.push("/")}else o.value="Невірні дані!",a.value="Невірні дані!",console.error("Помилка при отриманні токена:",n.statusText)}catch(e){o.value="Невірні дані!",a.value="Невірні дані!",console.error("Помилка при реєстрації або авторизації користувача:",e)}};async function y(){const t=await T("https://buy-sell-api.onrender.com/api/user/profile");if(t.ok){const e=await t.json();V(e),console.log("Успішно збережено профіль:",e)}else console.error("Помилка при збережені акаунта:",t.statusText)}async function b(){let t=!0;return c.value.includes("@")||(o.value="Введіть коректну електронну адресу",t=!1),i.value.length<4&&(a.value="Пароль повинен містити принаймні 4 символів",t=!1),t}function g(){o.value="",a.value=""}return(t,e)=>{const n=k;return p(),d("div",P,[D,s("div",J,[s("form",{onSubmit:N(w,["prevent"]),class:"space-y-4"},[s("div",M,[s("div",O,[f(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l),autocomplete:"email",required:"",placeholder:"Введіть електронну пошту",class:"input"},null,512),[[_,c.value]]),o.value?(p(),d("span",U,m(o.value),1)):x("",!0)]),s("div",W,[f(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),required:"",placeholder:"Введіть пароль",class:"input"},null,512),[[_,i.value]]),a.value?(p(),d("span",F,m(a.value),1)):x("",!0)])]),R],32),j(n,{to:"/auth/registration/",class:"text-center block mt-4 text-blue-600"},{default:E(()=>[q("В мене немає акаунту")]),_:1})])])}}},Q=I(A,[["__scopeId","data-v-17aac432"]]);export{Q as default};
