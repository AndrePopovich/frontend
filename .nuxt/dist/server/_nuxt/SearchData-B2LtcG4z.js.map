{"version":3,"file":"SearchData-B2LtcG4z.js","sources":["../../../../components/search/SearchData.vue"],"sourcesContent":["<template>\n    <div class=\"bg-gray-300\">\n        <div class=\"bg-gray-300 rounded-lg shadow-lg p-8 mx-auto\">\n            <form @submit.prevent=\"searchAds\" class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                <!-- Поле введення \"Що шукаєте?\" -->\n                <div class=\"flex flex-col relative\">\n                    <input type=\"text\" id=\"adName\" placeholder=\"Що шукаєте?\" v-model=\"adName\" class=\"custom-input\">\n                    <!-- Підсвічування знизу -->\n                    <div class=\"highlight-border\"></div>\n                </div>\n                <!-- Поле введення \"Виберіть категорію\" -->\n                <div class=\"flex flex-col relative\">\n                    <input list=\"categories\" id=\"selectedCategory\" placeholder=\"Виберіть категорію\"\n                        v-model=\"selectedCategory\" class=\"custom-input\">\n                    <!-- Підсвічування знизу -->\n                    <div class=\"highlight-border\"></div>\n                    <datalist id=\"categories\">\n                        <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.name\">{{\n                category.name }}</option>\n                    </datalist>\n                </div>\n                <!-- Поле введення \"Виберіть місто\" -->\n                <div class=\"flex flex-col relative\">\n                    <input list=\"cities\" id=\"selectedCity\" placeholder=\"Виберіть місто\" v-model=\"selectedCity\"\n                        class=\"custom-input\">\n                    <!-- Підсвічування знизу -->\n                    <div class=\"highlight-border\"></div>\n                    <datalist id=\"cities\">\n                        <option v-for=\"city in cities\" :key=\"city.id\" :value=\"city.name\">{{ city.name }}</option>\n                    </datalist>\n                </div>\n                <!-- Поле введення \"Мінімальна ціна\" -->\n                <div class=\"flex flex-col relative\">\n                    <input type=\"number\" placeholder=\"Мінімальна ціна\" id=\"minPrice\" v-model.number=\"minPrice\" min=\"0\"\n                        max=\"1000000\" class=\"custom-input\">\n                    <!-- Підсвічування знизу -->\n                    <div class=\"highlight-border\"></div>\n                </div>\n                <!-- Поле введення \"Максимальна ціна\" -->\n                <div class=\"flex flex-col relative\">\n                    <input type=\"number\" placeholder=\"Максимальна ціна\" id=\"maxPrice\" v-model.number=\"maxPrice\" min=\"0\"\n                        max=\"1000000\" class=\"custom-input\">\n                    <!-- Підсвічування знизу -->\n                    <div class=\"highlight-border\"></div>\n                </div>\n                <!-- Поле вибору \"Сортувати за\" -->\n                <div class=\"flex flex-col relative\">\n                    <select id=\"sortBy\" v-model=\"sortBy\" class=\"custom-input\">\n                        <option value=\"default\">За замовчуванням</option>\n                        <option value=\"priceAsc\">Ціна (зростанням)</option>\n                        <option value=\"priceDesc\">Ціна (спаданням)</option>\n                        <option value=\"dateAsc\">Дата (зростанням)</option>\n                        <option value=\"dateDesc\">Дата (спаданням)</option>\n                    </select>\n                    <!-- Підсвічування знизу -->\n                    <div class=\"highlight-border\"></div>\n                </div>\n                <!-- Кнопка \"Знайти оголошення\" -->\n                <div class=\"col-span-full flex justify-center\">\n                    <button type=\"submit\" class=\"btn-admin w-64\">Знайти оголошення</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n\n<script setup>\nimport { useRouter } from 'vue-router';\nimport { ref, onMounted } from 'vue';\n\nconst router = useRouter();\nconst adName = ref('');\nconst minPrice = ref(null);\nconst maxPrice = ref(null);\nconst sortBy = ref('default');\nconst categories = ref([]);\nconst cities = ref([]);\nconst selectedCategory = ref(null); // Зберігаємо лише ідентифікатор категорії\nconst selectedCity = ref(null); // Зберігаємо лише ідентифікатор міста\n\nconst searchAds = async () => {\n    // Отримуємо значення змінних з компоненту\n    const name = adName.value; // Отримуємо значення ім'я оголошення\n    const category = selectedCategory.value;\n    const city = selectedCity.value;\n    const min = minPrice.value;\n    const max = maxPrice.value;\n    const sort = sortBy.value;\n\n    // Встановлюємо значення в localStorage\n    localStorage.setItem('adName', name);\n    localStorage.setItem('categoryName', category);\n    localStorage.setItem('cityName', city);\n    localStorage.setItem('minPrice', min);\n    localStorage.setItem('maxPrice', max);\n    localStorage.setItem('sortBy', sort);\n\n    if (router.currentRoute.value.path === '/search') {\n        // Якщо ми вже на сторінці пошуку, оновлюємо параметри запиту\n        router.replace({\n            query: {\n                adName: name, // Додаємо ім'я оголошення до об'єкта запиту\n                categoryName: category,\n                cityName: city,\n                minPrice: min,\n                maxPrice: max,\n                sortBy: sort\n            }\n        });\n    } else {\n        // Якщо ми не на сторінці пошуку, переходимо на неї з новими параметрами\n        router.push({\n            path: '/search',\n            query: {\n                adName: name, // Додаємо ім'я оголошення до об'єкта запиту\n                categoryName: category,\n                cityName: city,\n                minPrice: min,\n                maxPrice: max,\n                sortBy: sort\n            }\n        });\n    }\n}\n\n\nasync function loadData() {\n    const categoriesResponse = await fetch('https://buy-sell-api.onrender.com/api/search/categories');\n    const citiesResponse = await fetch('https://buy-sell-api.onrender.com/api/search/cities');\n\n    categories.value = await categoriesResponse.json();\n    cities.value = await citiesResponse.json();\n}\nonMounted(() => {\n    loadData();\n\n    // Перевірка значень у localStorage перед їхнім використанням\n    /*const categoryName = localStorage.getItem('categoryName');\n    selectedCategory.value = categoryName !== null ? categoryName : '';\n\n    const cityName = localStorage.getItem('cityName');\n    selectedCity.value = cityName !== null ? cityName : '';\n\n    const storedMinPrice = localStorage.getItem('minPrice');\n    minPrice.value = storedMinPrice !== null ? parseFloat(storedMinPrice) : null;\n\n    const storedMaxPrice = localStorage.getItem('maxPrice');\n    maxPrice.value = storedMaxPrice !== null ? parseFloat(storedMaxPrice) : null;\n\n           const storedSortBy = localStorage.getItem('sortBy');\n           sortBy.value = storedSortBy !== null ? storedSortBy : 'default';*/\n});\n\n</script>\n\n<style scoped>\n.custom-input {\n    padding: 5px;\n    border-radius: 5px;\n    border: 1px solid transparent;\n    transition: border-color 0.3s ease-in-out;\n    /* Плавний перехід для бордера */\n    position: relative;\n}\n\n.custom-input:focus {\n    border-color: transparent;\n    /* Транспарентний бордер при фокусі */\n    outline: none;\n    /* Видалення контурів */\n}\n\n.highlight-border {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 1px;\n    background-color: #8a2be2;\n    /* Фіолетовий колір підсвічування */\n    transition: height 0.3s ease-in-out;\n    /* Плавний перехід для висоти */\n    pointer-events: none;\n    /* Вимкнення можливості взаємодії з елементом */\n}\n\n.custom-input:focus+.highlight-border {\n    height: 4px;\n    /* Збільшення висоти при фокусі */\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;AAuEe,cAAY;AAC3B,UAAM,SAAS,IAAI,EAAE;AACrB,UAAM,WAAW,IAAI,IAAI;AACzB,UAAM,WAAW,IAAI,IAAI;AACzB,UAAM,SAAS,IAAI,SAAS;AAC5B,UAAM,aAAa,IAAI,CAAA,CAAE;AACzB,UAAM,SAAS,IAAI,CAAA,CAAE;AACrB,UAAM,mBAAmB,IAAI,IAAI;AACjC,UAAM,eAAe,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;"}